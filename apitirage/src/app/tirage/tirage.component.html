<main>
    <div class="lesPostulants row ">
        <div class="col-8">
            <h1>Faite vos tirages</h1>
        </div>
        <div class="col-4" align="center">
            <img src="assets/tirage2.png" width="30%">
        </div>
      
      </div>
    
      
      <div class="container row">

        <div class="col-8">
            <form  (ngSubmit)="faireTirage()" #FormulaireTirage="ngForm" >
                <table>
                      <tbody>

                          <tr>
                              <td>Choisir une liste</td>
                                <td> 
                                    <select   [(ngModel)]="select_liste" name="libelleliste" class="form-control">
                                        <option *ngFor="let listeTirage  of listeTirages"  class="form-control" [ngValue]="listeTirage.libelle">
                                            {{listeTirage.libelle}}
                                        </option>
                                    </select>

                              </td>
                          </tr>
                          <tr>
                              <td>Donner un nombre</td>
                              <td> <input type="number" class="form-control"  [(ngModel)]="nbre_postulant_tirer" name="nbre_postulant_tirer" min="1" placeholder="10"></td>
                          </tr>
                          <tr>
                                          <td for="libelle_tirage">Libellé du tirage</td>
                                          <td><input type="text" id="libelle_tirage"  [(ngModel)]="tirage.libelle_tirage" class="form-control" placeholder="Liste apprenants" name="libelleTirage"></td>
                          </tr>
                          <tr>
                              <td><input type="submit" value="Trier" class="form-control btn btn-outline-primary" (click)="open(mymodal)"></td>
                          </tr>
          
                      </tbody>
                </table>
          </form>
        </div>

   
<!-- Importer un fichier csv ici -->
        
       
        <div class="col-4">
            <form [formGroup]="formulairesImp" (ngSubmit)="enregistreDonner()">
                <table>
                      <tbody >
                    
                          <tr>
                            <td>
                                <input type="file" name="file" class="form-control"  formControlName="file" (change)="fileChange($event)">
                            </td>
                          </tr>
                          <tr>
                            <td>
                                <input type="text" name="libelle" formControlName="libelle" class="form-control" placeholder="Libellés" [(ngModel)]="tirage.libelleListe" >
                            </td>
                           
                          </tr>
                          <tr>
                          <td>
                            <input type="text" name="date" class="form-control"  formControlName="date" name="date" hidden>
                        </td>
                        </tr>

                          <tr>
                            <td>
                                <input type="submit" name="import" value="Envoyer" class="form-control btn btn-primary">
                            </td>
                          </tr>
                      </tbody>
                </table>
          </form>
        </div>

    </div>





        <ng-template let-modal  #mymodal>
          <div class="modal-header">
            <h4 class="modal-title" id="modal-basic-title">Les personnes tirées</h4>
            <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
              <span aria-hidden="true">×</span>
            </button>
          </div>
          <div class="modal-body" *ngIf="unePersonnes; else erreur">
           
            <table >
                <thead>
                    <th>Nom</th><th>Prenom</th> <th>Email</th>  <th>Numéro</th>
                </thead>
                <tbody>
                    <tr *ngFor="let debuter of unePersonnes ">
                        <td>{{debuter[1]}}</td>
                        <td>{{debuter[2]}}</td>
                        <td>{{debuter[4]}}</td>
                        <td>{{debuter[0]}}</td> 
                        <td>{{debuter[3]}}</td>
                       
                    </tr>
                </tbody>
            </table>
    
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-outline-dark" (click)="modal.close('Save click')">Ok</button>
          </div>
        </ng-template>

        <ng-template #erreur>
               <td> Veuilleir bien renseigner les champs</td>
        </ng-template>

</main>